async function search(e){let t=document.getElementById("results");t.innerHTML="";let r=await fetch("/api/search",{method:"POST",headers:{"Content-Type":"text/plain"},body:e}),a=await r.json();for([path,file]of a){let n=document.createElement("div");n.className="result",renderResult(n,path,file),t.appendChild(n)}}function renderResult(e,t,r){let a=document.createElement("span");a.className="fn",a.appendChild(document.createTextNode(r));let n=document.createElement("a");n.href=t,n.textContent=t,n.className="fa",n.target="_blank",n.rel="noopener noreferrer",e.appendChild(a),e.appendChild(n)}let query=document.getElementById("query"),searchPromise=Promise.resolve();query.addEventListener("keypress",e=>{"Enter"==e.key&&searchPromise.then(()=>search(query.value))});